{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}

{% include 'product/carousel.html' %}

<span class="animate-spin"><i class="bi biarrow-clockwise animate-spin fa-spin"></i></span><h2 class="text-center text-2xl"> Processing </h2>

 <form action="https://rc-epay.esewa.com.np/api/epay/main/v2/form" method="POST" id='esewaform'>
 <input type="hidden" id="amount" name="amount" value="{{data.amount}}" required>
 <input type="hidden" id="tax_amount" name="tax_amount" value ="0" required>
 <input type="hidden" id="total_amount" name="total_amount" value="{{data.total_amount}}" required>
 <input type="hidden" id="transaction_uuid" name="transaction_uuid" value="{{data.transaction_uuid}}" required>
 <input type="hidden" id="product_code" name="product_code" value ="EPAYTEST" required>
 <input type="hidden" id="product_service_charge" name="product_service_charge" value="0" required>
 <input type="hidden" id="product_delivery_charge" name="product_delivery_charge" value="0" required>
 <input type="hidden" id="success_url" name="success_url" value="http://localhost:8000/esewaverify/{{order.id}}/{{cart.id}}/" required>
 <input type="hidden" id="failure_url" name="failure_url" value="http://127.0.0.1:8000/esewa/failure/" required>
 <input type="hidden" id="signed_field_names" name="signed_field_names" value="total_amount,transaction_uuid,product_code" required>
 <input type="hidden" id="signature" name="signature" value="{{data.signature}}" required>
 <input type="hidden" id="oid" name="oid" value="{{data.oid}}" required>
 <input value="Submit" type="hidden">
 </form>

 <script>
    setTimeout(()=>{
        document.getElementById('esewaform').submit()
    }, 3000)
 </script>


{% endblock %}